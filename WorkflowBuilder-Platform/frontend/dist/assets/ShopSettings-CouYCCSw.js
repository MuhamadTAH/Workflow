import{r as t,t as E,j as e,N as D,s as j,S as h,F as v,z as L,H as M,k as F}from"./index-BXAzR72f.js";function U(){const[r,f]=t.useState(null),[S,b]=t.useState(!0),[d,u]=t.useState(!1),[m,c]=t.useState(""),[p,g]=t.useState(""),[l,i]=t.useState("general"),[a,x]=t.useState({displayName:"",description:"",contactMethod:"whatsapp",contactValue:"",currency:"USD",timezone:"UTC",language:"en",theme:"default",allowReviews:!0,requireLogin:!1,enableInventory:!0,lowStockThreshold:5});if(!E.isLoggedIn())return e.jsx(D,{to:"/login"});t.useEffect(()=>{N()},[]);const N=async()=>{try{const s=(await j.getMyShop()).data.shop;s&&(f(s),x({displayName:s.displayName||"",description:s.description||"",contactMethod:s.contactMethod||"whatsapp",contactValue:s.contactValue||"",currency:s.currency||"USD",timezone:s.timezone||"UTC",language:s.language||"en",theme:s.theme||"default",allowReviews:s.allowReviews!==!1,requireLogin:s.requireLogin||!1,enableInventory:s.enableInventory!==!1,lowStockThreshold:s.lowStockThreshold||5}))}catch(o){console.error("Error loading shop settings:",o),c("Failed to load shop settings")}finally{b(!1)}},n=o=>{const{name:s,value:C,type:w,checked:k}=o.target;x(T=>({...T,[s]:w==="checkbox"?k:C}))},y=async o=>{o.preventDefault(),u(!0),c("");try{await j.updateShop(r.id,a),g("Settings saved successfully!"),setTimeout(()=>g(""),3e3)}catch(s){console.error("Error saving settings:",s),c("Failed to save settings")}finally{u(!1)}};return S?e.jsx(h,{title:"Shop Settings",subtitle:"Configure your shop preferences",children:e.jsx("div",{className:"loading",children:"Loading settings..."})}):r?e.jsx(h,{title:"Shop Settings",subtitle:`Settings for ${r.displayName}`,children:e.jsxs("div",{className:"settings-page",children:[m&&e.jsx("div",{className:"error-message",children:m}),p&&e.jsx("div",{className:"success-message",children:p}),e.jsxs("div",{className:"settings-tabs",children:[e.jsxs("button",{className:`tab-btn ${l==="general"?"active":""}`,onClick:()=>i("general"),children:[e.jsx(v,{})," General"]}),e.jsxs("button",{className:`tab-btn ${l==="store"?"active":""}`,onClick:()=>i("store"),children:[e.jsx(L,{})," Store"]}),e.jsxs("button",{className:`tab-btn ${l==="appearance"?"active":""}`,onClick:()=>i("appearance"),children:[e.jsx(M,{})," Appearance"]})]}),e.jsxs("form",{onSubmit:y,className:"settings-form",children:[l==="general"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"General Information"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Shop Name"}),e.jsx("input",{type:"text",name:"displayName",value:a.displayName,onChange:n,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{name:"description",value:a.description,onChange:n,className:"form-textarea",rows:"3"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Contact Method"}),e.jsxs("select",{name:"contactMethod",value:a.contactMethod,onChange:n,className:"form-select",children:[e.jsx("option",{value:"whatsapp",children:"WhatsApp"}),e.jsx("option",{value:"telegram",children:"Telegram"}),e.jsx("option",{value:"email",children:"Email"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Contact Value"}),e.jsx("input",{type:"text",name:"contactValue",value:a.contactValue,onChange:n,className:"form-input"})]})]})]}),l==="store"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Store Configuration"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Currency"}),e.jsxs("select",{name:"currency",value:a.currency,onChange:n,className:"form-select",children:[e.jsx("option",{value:"USD",children:"USD ($)"}),e.jsx("option",{value:"EUR",children:"EUR (€)"}),e.jsx("option",{value:"GBP",children:"GBP (£)"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Timezone"}),e.jsxs("select",{name:"timezone",value:a.timezone,onChange:n,className:"form-select",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"EST",children:"EST"}),e.jsx("option",{value:"PST",children:"PST"})]})]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"allowReviews",checked:a.allowReviews,onChange:n}),"Allow customer reviews"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"requireLogin",checked:a.requireLogin,onChange:n}),"Require login to purchase"]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"enableInventory",checked:a.enableInventory,onChange:n}),"Enable inventory tracking"]})}),a.enableInventory&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Low Stock Threshold"}),e.jsx("input",{type:"number",name:"lowStockThreshold",value:a.lowStockThreshold,onChange:n,className:"form-input",min:"0"})]})]}),l==="appearance"&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h3",{children:"Store Appearance"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Theme"}),e.jsxs("select",{name:"theme",value:a.theme,onChange:n,className:"form-select",children:[e.jsx("option",{value:"default",children:"Default"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"modern",children:"Modern"}),e.jsx("option",{value:"classic",children:"Classic"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Language"}),e.jsxs("select",{name:"language",value:a.language,onChange:n,className:"form-select",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"ar",children:"Arabic"})]})]})]}),e.jsx("div",{className:"settings-actions",children:e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:d,children:[e.jsx(F,{})," ",d?"Saving...":"Save Settings"]})})]})]})}):e.jsx(h,{title:"Shop Settings",subtitle:"Configure your shop preferences",children:e.jsxs("div",{className:"no-shop-message",children:[e.jsx(v,{className:"no-shop-icon"}),e.jsx("h2",{children:"No Shop Found"}),e.jsx("p",{children:"Create a shop first to access settings."})]})})}export{U as default};
